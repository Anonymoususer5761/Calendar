{% extends 'layout.html' %}

{% block style %}
    <link rel="stylesheet" href="{{ url_for('static', filename='dates.css') }}">
{% endblock %}

{% block main %}
    <p class="h1 text-primary">{{ date }}</p>

    <div class="d-flex m-2">
        <a class="btn btn-sm btn-outline-tertiary rounded" role="button" {% if not current_user.is_authenticated %} data-bs-toggle="modal" data-bs-target="#alert-modal"{% endif %}>
            Add Event
        </a>
    </div>
    <div id="alert-modal" class="modal fade" tabindex="-1" aria-labelledby="modal-title" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <p id="modal-title" class="h5 modal-title">Login Required</p>
                    <a class="btn btn-sm btn-tertiary btn-close" role="button" data-bs-dismiss="modal" aria-label="close"></a>
                </div>
                <a href="{{ url_for('login') }}" class="btn btn-sm btn-tertiary" role="button">Sign In</a>
            </div>
        </div>
    </div>

    <div class="container-sm my-5 ms-3 me-5">
        <div class="row justify-content-center">
            <div class="day-name text-center">{{ day_name }}</div>
        </div>
        <div class="row">
            <svg class="col-1 row ms-0 me-1 ps-2 pe-0 hours-row-svg" height="2500" width="100%">
                <text class="hours-label" x="25%" y="22">00:00</text>
                <text class="hours-label" x="25%" y="122">01:00</text>
                <text class="hours-label" x="25%" y="222">02:00</text>
                <text class="hours-label" x="25%" y="322">03:00</text>
                <text class="hours-label" x="25%" y="422">04:00</text>
                <text class="hours-label" x="25%" y="522">05:00</text>
                <text class="hours-label" x="25%" y="622">06:00</text>
                <text class="hours-label" x="25%" y="722">07:00</text>
                <text class="hours-label" x="25%" y="822">08:00</text>
                <text class="hours-label" x="25%" y="922">09:00</text>
                <text class="hours-label" x="25%" y="1022">10:00</text>
                <text class="hours-label" x="25%" y="1122">11:00</text>
                <text class="hours-label" x="25%" y="1222">12:00</text>
                <text class="hours-label" x="25%" y="1322">13:00</text>
                <text class="hours-label" x="25%" y="1422">14:00</text>
                <text class="hours-label" x="25%" y="1522">15:00</text>
                <text class="hours-label" x="25%" y="1622">16:00</text>
                <text class="hours-label" x="25%" y="1722">17:00</text>
                <text class="hours-label" x="25%" y="1822">18:00</text>
                <text class="hours-label" x="25%" y="1922">19:00</text>
                <text class="hours-label" x="25%" y="2022">20:00</text>
                <text class="hours-label" x="25%" y="2122">21:00</text>
                <text class="hours-label" x="25%" y="2222">22:00</text>
                <text class="hours-label" x="25%" y="2322">23:00</text>
                <text class="hours-label" x="25%" y="2422">00:00</text>
            </svg>
            <!-- <div class="col-1 row mx-2 hours-row">
                <div class="hours p-0">00:00</div>
                <div class="hours p-0">01:00</div>
                <div class="hours p-0">02:00</div>
                <div class="hours p-0">03:00</div>
                <div class="hours p-0">04:00</div>
                <div class="hours p-0">05:00</div>
                <div class="hours p-0">06:00</div>
                <div class="hours p-0">07:00</div>
                <div class="hours p-0">08:00</div>
                <div class="hours p-0">09:00</div>
                <div class="hours p-0">10:00</div>
                <div class="hours p-0">11:00</div>
                <div class="hours p-0">12:00</div>
                <div class="hours p-0">13:00</div>
                <div class="hours p-0">14:00</div>
                <div class="hours p-0">15:00</div>
                <div class="hours p-0">16:00</div>
                <div class="hours p-0">17:00</div>
                <div class="hours p-0">18:00</div>
                <div class="hours p-0">19:00</div>
                <div class="hours p-0">20:00</div>
                <div class="hours p-0">21:00</div>
                <div class="hours p-0">22:00</div>
                <div class="hours p-0">23:00</div>
                <div class="hours p-0">24:00</div>
            </div> -->
            <div id="day-timeline" class="col-10 p-0 ms-0 mt-3 pe-5">
                <svg class="hours-line-svg" height="2500" width="100%">
                    <line class="hours-line" x1="0" y1="200" x2="100%" y2="200"></line>
                    <line class="hours-line" x1="0" y1="300" x2="100%" y2="300"></line>
                    <line class="hours-line" x1="0" y1="400" x2="100%" y2="400"></line>
                    <line class="hours-line" x1="0" y1="100" x2="100%" y2="100"></line>
                    <line class="hours-line" x1="0" y1="500" x2="100%" y2="500"></line>
                    <line class="hours-line" x1="0" y1="600" x2="100%" y2="600"></line>
                    <line class="hours-line" x1="0" y1="700" x2="100%" y2="700"></line>
                    <line class="hours-line" x1="0" y1="800" x2="100%" y2="800"></line>
                    <line class="hours-line" x1="0" y1="900" x2="100%" y2="900"></line>
                    <line class="hours-line" x1="0" y1="1000" x2="100%" y2="1000"></line>
                    <line class="hours-line" x1="0" y1="1100" x2="100%" y2="1100"></line>
                    <line class="hours-line" x1="0" y1="1200" x2="100%" y2="1200"></line>
                    <line class="hours-line" x1="0" y1="1300" x2="100%" y2="1300"></line>
                    <line class="hours-line" x1="0" y1="1400" x2="100%" y2="1400"></line>
                    <line class="hours-line" x1="0" y1="1500" x2="100%" y2="1500"></line>
                    <line class="hours-line" x1="0" y1="1600" x2="100%" y2="1600"></line>
                    <line class="hours-line" x1="0" y1="1700" x2="100%" y2="1700"></line>
                    <line class="hours-line" x1="0" y1="1800" x2="100%" y2="1800"></line>
                    <line class="hours-line" x1="0" y1="1900" x2="100%" y2="1900"></line>
                    <line class="hours-line" x1="0" y1="2000" x2="100%" y2="2000"></line>
                    <line class="hours-line" x1="0" y1="2100" x2="100%" y2="2100"></line>
                    <line class="hours-line" x1="0" y1="2200" x2="100%" y2="2200"></line>
                    <line class="hours-line" x1="0" y1="2300" x2="100%" y2="2300"></line>
                    <line id="today" x1="0" y1="0" x2="100%" y2="2300"></line>
                </svg>
            </div>
        </div>
    </div>

    {% if current_user.is_authenticated %}
    <div id="add-event-div">
        <form action="" method="post">
            <button type="button" class="close-add-event-form">X</button>
            {{ add_event_form.hidden_tag() }}
            <p>
                {{ add_event_form.name.label }}<br>
                {{ add_event_form.name(size=32) }}<br>
            </p>
            <p>
                {{ add_event_form.description.label }}<br>
                {{ add_event_form.description(size=64) }}
            </p>
            <p>
                {{ add_event_form.start_time.label }}
                {{ add_event_form.start_time(value=add_event_form.start_time.default) }}
            </p>
                {{ add_event_form.end_time.label }}
                {{ add_event_form.end_time(value=add_event_form.start_time.default) }}
            <p>
                {{ add_event_form.event_color.label }}
                {{ add_event_form.event_color(id="event-color") }}
                <svg width="30" height="25">
                    <rect id="event-form-color-picker" fill="red" x="15" y="15" width="30" height="12.5"></rect>
                </svg>
            </p>
            <p>
                {{ add_event_form.submit() }}
            </p>
        </form>
    </div>
    {% endif %}

    {% if events %}
        {% for event in events %}
            <div id="event-popup-{{ event.id }}" class="event-popup card text-bg-primary mb-3" style="--popup-color: {{ event.color }}; max-width: 18rem">
                <h1 class="event-popup-name">{{ event.name }}</h1>
                <p class="event-popup-desc">{{ event.desc }}</p>
                <p class="event-popup-start">{{ event.start_time }}</p>
                <p class="event-popup-end">{{ event.end_time }}</p>
            </div>
        {% endfor %}
    {% endif %}
    <script src="{{ url_for('static', filename='dates.js') }}"></script>
{% endblock main %}